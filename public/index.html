<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Private CHESS</title>
  <style>
    body { background: #222; color: #fff; font-family: Arial, sans-serif; text-align: center; margin: 0; padding-bottom: 72px; }
    #game-area {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      margin-top: 30px;
    }
    #timers { margin-bottom: 16px; text-align: center; font-size: 1.1em; font-weight: bold; }
    #chessboard { margin: 0 auto; width: min(90vw, 90vh); max-width: 600px; }
    #status { margin: 20px; font-size: 1.2em; }
    button, input[type="text"] {
      padding: 12px 18px;
      font-size: 1.1em;
      border-radius: 6px;
      margin: 4px 0;
      box-sizing: border-box;
    }
    #private-room-controls { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; align-items: center; }
    #private-room-controls input { min-width: 110px; }
    @media (max-width: 700px) {
      #game-area { flex-direction: column; align-items: center; gap: 0; }
      #chessboard { width: 98vw; max-width: 98vw; }
      #timers { font-size: 1em; }
      #history, #stats, #chat { max-width: 98vw; min-width: unset; }
      #chat-messages { height: 80px; font-size: 0.95em; }
    }
    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(-30px); }
    }
  </style>
</head>
<body>
  <div style="width:100%;text-align:right;padding:8px 16px 0 0;">
    <label for="lang-select" style="font-weight:bold;">Idioma:</label>
    <select id="lang-select" style="font-size:1em;padding:2px 8px;">
      <option value="pt">Portugu√™s</option>
      <option value="en">English</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
    </select>
  </div>
  <h1>Private CHESS</h1>
  <div id="privacy-banner" style="background:#222;color:#fff;padding:12px 0;font-size:1.1em;border-bottom:2px solid #444;">
    üîí Private CHESS: Este jogo √© seguro, privado e n√£o coletamos nenhum dado dos jogadores.
  </div>
  <div id="private-room-controls" style="margin: 20px 0;">
    <button id="createRoomBtn">Criar sala privada</button>
    <input id="roomCodeInput" type="text" maxlength="6" placeholder="C√≥digo da sala" style="width:120px;display:inline-block;">
    <button id="joinRoomBtn">Entrar em sala</button>
    <div id="roomCodeDisplay" style="margin-top:10px;font-size:1.1em;color:#6f6;display:none;"></div>
  </div>
  <div id="status">Clique em "Iniciar jogo" para jogar contra outro jogador.</div>
  <button id="startBtn">Iniciar jogo</button>
  <button id="resignBtn" style="display:none;background:#c00;color:#fff;">Desistir</button>
  <div id="game-area" style="display:flex;justify-content:center;align-items:flex-start;gap:40px;margin-top:30px;">
    <div>
      <div id="timers" style="margin-bottom:16px;text-align:center;font-size:1.1em;font-weight:bold;">
        <div>Tempo das brancas: <span id="white-timer">0:00</span></div>
        <div>Tempo das pretas: <span id="black-timer">0:00</span></div>
      </div>
      <div id="chessboard"></div>
    </div>
    <div style="min-width:220px;max-width:300px;">
      <div id="history" style="margin-top:0;">
        <h3>Hist√≥rico de Movimentos</h3>
        <div style="display:flex;gap:8px;margin-bottom:8px;">
          <button id="snapshotBtn" style="font-size:0.95em;">Baixar PNG</button>
        </div>
        <ol id="move-list"></ol>
      </div>
      <div id="stats" style="margin-top:20px;">
        <h3>Estat√≠sticas</h3>
        <div>Lances: <span id="move-count">0</span></div>
        <div>Capturas: <span id="capture-count">0</span></div>
        <div>Xeques: <span id="check-count">0</span></div>
      </div>
      <div id="chat" style="margin-top:30px;background:#181818;padding:12px 8px 8px 8px;border-radius:8px;box-shadow:0 2px 8px #0002;">
        <h3 style="margin-top:0;">Chat</h3>
        <div id="chat-messages" style="height:120px;overflow-y:auto;background:#222;padding:6px 4px 6px 8px;border-radius:5px;font-size:1em;margin-bottom:8px;"></div>
        <form id="chat-form" style="display:flex;gap:6px;">
          <input id="chat-input" type="text" maxlength="120" placeholder="Digite sua mensagem..." style="flex:1;padding:4px 8px;border-radius:4px;border:1px solid #444;background:#222;color:#fff;">
          <button type="submit" style="background:#444;color:#fff;border:none;padding:4px 12px;border-radius:4px;">Enviar</button>
        </form>
      </div>
    </div>
  </div>
  <div id="victory-overlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);z-index:9999;justify-content:center;align-items:center;flex-direction:column;">
    <img src="baby.gif" alt="Vit√≥ria" style="width:220px;max-width:80vw;animation:bounce 1.2s infinite alternate;">
    <div style="color:#fff;font-size:2.2em;font-weight:bold;margin-top:30px;text-shadow:2px 2px 8px #000;">VOC√ä VENCEU.</div>
  </div>
  <div id="exportModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);z-index:9999;justify-content:center;align-items:center;flex-direction:column;">
    <div id="exportContent" style="background:#222;padding:24px 16px;border-radius:10px;max-width:90vw;max-height:80vh;overflow:auto;text-align:left;"></div>
    <div style="margin-top:16px;">
      <button onclick="copyExportText()" id="copyExportBtn" style="font-size:1em;display:none;">Copiar</button>
      <button onclick="closeExportModal()" style="font-size:1em;">Fechar</button>
      <a id="downloadExportBtn" style="display:none;font-size:1em;margin-left:8px;" download>Baixar</a>
    </div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="chess.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.css" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚ôüÔ∏è</text></svg>'">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('service-worker.js');
      });
    }
  </script>
  <script src="main.js"></script>
  <footer style="position:fixed;bottom:0;left:0;width:100%;background:#111;color:#fff;padding:2px 0;text-align:center;font-size:0.95em;z-index:100;height:28px;line-height:24px;">
    <span id="footer-text">Desenvolvido por Pablo Murad - 2025</span>
  </footer>
  <script>
    document.getElementById('ano-atual').textContent = new Date().getFullYear();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html> 